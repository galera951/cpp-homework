# Контрольные вопросы
### Что есть <<состояние гонки>> и к чему оно может привести?
Состояние гонки (Race Condition) — конкуренция за выполнение операции первым. Это может привести к неопределённому поведению (UB). Добавление эелемента в очередь в общем случае — безвредная гонка.

### Как используются мьютексы и условные переменные?
Мьютексы используются для предоставления эксклюзивного доступа к данным для одного потока. 
Условные переменные используются для блокировки потоков и уведомления другим потоком о возможности проснуться.

### На что влияет выбор гранулярности блокировки?
Гранулярность блокировки -- это мера объема данных, которые защищает блокировка. Как правило, выбор грубой детализации (небольшое количество блокировок, каждая из которых защищает большой сегмент данных) приводит к меньшим накладным расходам на блокировку, когда один процесс обращается к защищенным данным, но к худшей производительности, когда несколько процессов выполняются одновременно. То есть выбор гранулярности прямым образом влияет на производительность программы.

### Когда возникает взаимоблокировка и как ее предотвратить?
Взаимоблокировка (livelock, deadlock) -- это состояние, при котором не менее двух потоков блокируют выполнение друг друга. Возникает в связи с ошибкой разработчика, например, когда каждый поток захватывает один из нескольких мьютексов, а для работы каждого из них нужно захватить все.
Для предотвращения взаимоблокировок нужно использовать мьютексы с приоритетами, гарантировать одинаковый порядок (в общем случае порядок выполнения может не совпадать с написанным в коде), использовать std::lock и не делать вложенных блокировок.

### Что есть атомарная операция и атомарный тип данных?
Атомарная операция -- это такая операция, которая производит неделимые манипуляции памятью: ни один поток не может наблюдать такую операцию на промежуточной стадии выполнения.
Атомарный тип данных -- это такой тд, который определяет объект, операции над которым можно считать неделимыми, т.е. такими, которые не могут быть прерваны или результат которых не может быть получен, до окончания операции.